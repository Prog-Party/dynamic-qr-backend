using Microsoft.Azure.Functions.Worker.Http;
using System.Net;

namespace DynamicQR.Api.Middleware;

public static class ValidateHttpRequestMiddleware
{
    public static async Task<HttpResponseData> ValidateCustomerIdentifier(HttpRequestData req, HttpResponseData res)
    {
        if (!req.Headers.TryGetValues("Customer-Identifier", out var customerIdentifiers) || !customerIdentifiers.Any())
        {
            res.StatusCode = HttpStatusCode.BadRequest;
            await res.WriteStringAsync("Missing required header: Customer-Identifier");
        }

        return res;
    }
}
